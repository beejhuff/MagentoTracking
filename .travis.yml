language: php

php: [5.3.3, 5.3, 5.4, 5.5, hhvm]

before_script:
  - composer selfupdate
  - export COMPOSER_ROOT_VERSION=2.0.0-RC3
  - composer install --prefer-source

script:
  - bin/phpspec run
  - bin/phpcs --standard=PSR1 .
  - bin/phpcs --standard=PSR2 .
  - bin/phpmd . text cleancode --exclude lightopenid
  - bin/phpmd . text codesize --exclude lightopenid
  - bin/phpmd . text controversial --exclude lightopenid
  - bin/phpmd . text design --exclude lightopenid
  - bin/phpmd . text naming --exclude lightopenid
  - bin/phpmd . text unusedcode --exclude lightopenid
  - bin/php phploc.phar .
